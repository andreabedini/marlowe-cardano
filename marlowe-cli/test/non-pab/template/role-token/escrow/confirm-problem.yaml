stTestName: Confirm Problem Escrow Contract with Role Token

stScriptOperations:
  - tag: Publish
    soPublishPermanently: true

  - tag: CreateWallet
    soWalletNickname: seller

  - tag: FundWallets
    soValues:
      - 50000000
    soWalletNicknames: [seller]

  - tag: CreateWallet
    soWalletNickname: buyer

  - tag: FundWallets
    soValues:
      - 350000000
    soWalletNicknames: [buyer]

  - tag: CreateWallet
    soWalletNickname: mediator

  - tag: FundWallets
    soValues:
      - 120000000
    soWalletNicknames: [mediator]

  - tag: Mint
    soCurrencyNickname: Escrow
    soTokenDistribution:
      - [ seller, seller, 1 ]
      - [ buyer, buyer, 1 ]
      - [ mediator, mediator, 1 ]


  - tag: Initialize
    soContractNickname: Escrow
    soMinAda: 3000000
    soRoleCurrency: Escrow
    soContractSource:
      template:
        tag: UseEscrow
        utPrice: 256
        utSeller:
          role_token: seller
        utBuyer:
          role_token: buyer
        utMediator:
          role_token: mediator
        utPaymentDeadline:
          relative: 1000000
        utComplaintDeadline:
          relative: 2000000
        utDisputeDeadline:
          relative: 3000000
        utMediationDeadline:
          relative: 4000000

  - tag: AutoRun
    soSubmitter: seller
    soContractNickname: Escrow

  - tag: Prepare
    soContractNickname: Escrow
    soInputs:
      - input_from_party:
          role_token: buyer
        that_deposits: 256
        of_token:
          currency_symbol: ""
          token_name: ""
        into_account:
          role_token: seller
    soMinimumTime:
      relative: -1000
    soMaximumTime:
      relative: 8000

  - tag: AutoRun
    soSubmitter: buyer
    soContractNickname: Escrow


  # - tag: Prepare
  #   soContractNickname: Escrow
  #   soInputs:
  #     - input_from_party:
  #       for_choice_id:
  #         choice_name: "Report problem"
  #         choice_owner:
  #           tole_token: buyer
  #   soMinimumTime:
  #     relative: -1000
  #   soMaximumTime:
  #     relative: 8000

  # - tag: AutoRun
  #   soContractNickname: Swap


